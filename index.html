<!doctype html>
<head>
  <meta charset="utf-8">

  <title>ArcBase</title>
  <meta name="description" content="Fledgling Parse database front-end for (poetry) publishers">
  <meta name="viewport" content="width=device-width">
  <link rel="stylesheet" href="css/reset.css">
  <link rel="stylesheet" href="css/styles.css">

  <link href='http://fonts.googleapis.com/css?family=Alegreya+Sans:400,400italic&subset=latin,latin-ext' rel='stylesheet' type='text/css'>

  <script type="text/javascript" src="keys.js"></script>
  <script type="text/javascript" src="bower_components/parse-js-sdk/lib/parse.min.js"></script>
  <script type="text/javascript" src="bower_components/sightglass/index.js"></script>
  <script type="text/javascript" src="bower_components/rivets/dist/rivets.js"></script>
  <script type="text/javascript" src="js/browser-polyfill.js"></script>
</head>

<body>

  <div id="main">
    <table>
      <thead>
        <th>Title</th>
        <th>Authors</th>
        <th>ISBNs</th>
        <th>Pub Date</th>
        <th>Short description</th>
        <th></th>
      </thead>
      <tr id="search">
        <td><input type="search"></td>
        <td><input type="search"></td>
        <td><input type="search"></td>
        <td><input type="search"></td>
        <td><input type="search"></td>
        <td><input type="search"></td>
      </tr>
      <tr id="instructions">
        <td></td>
        <td>Lastname, Firstname(s)</td>
        <td>spaces and hyphens are ok</td>
        <td></td>
        <td>Max. 350 characters (for Nielsen)</td>
        <td></td>
      </tr>
      <tr id="inputs">
        <td><input rv-value="inputs.title" type="text" id="title" placeholder="new title"></td>
        <td class="authors">
          <input rv-each-authorinput="inputs.authors" rv-value="authorinput.value" type="text" placeholder="authors">
          <!-- <input rv-value="authorinput" type="text" placeholder="authors"> -->
          <button class="add-input" rv-on-click="addAuthor">Add another author</button>
        </td>
        <td>
          <label id="pbk">pbk: <input rv-value="inputs.ISBNs.pbk" type="text" class="ISBNs"></label><br>
          <label id="hbk">hbk: <input rv-value="inputs.ISBNs.hbk" type="text" class="ISBNs"></label><br>
          <label id="ebk">ebk: <input rv-value="inputs.ISBNs.ebk" type="text" class="ISBNs"></label>
        </td>
        <td><input type="date" rv-value="inputs.pubdate"></td>
        <td><textarea maxlength="350" cols="30" rows="3" rv-value="inputs.shortdesc"></textarea></td>
        <td><button rv-on-click="submit">Submit</button></td>
      </tr>
      <tr rv-each-book="books">
        <td><input type="text" rv-value="book.title" rv-on-click="selectAll" rv-readonly="book.isEditing < button | opposite"></td>
        <td class="authors">
          <input class="author-button" type="text" rv-each-author="book.authors" rv-value="author.value" rv-on-click="showAuthorModal" rv-readonly="book.isEditing < button | opposite">
          <button rv-show="book.isEditing < button" class="add-input" rv-on-click="book.addAuthor">Add another author</button>
        </td>
        <td>
          <label id="pbk">pbk: <input rv-value="book.ISBNs.pbk" type="text" class="ISBNs" rv-on-click="selectAll" rv-readonly="book.isEditing < button | opposite"></label><br>
          <label id="hbk">hbk: <input rv-value="book.ISBNs.hbk" type="text" class="ISBNs" rv-on-click="selectAll" rv-readonly="book.isEditing < button | opposite"></label><br>
          <label id="ebk">ebk: <input rv-value="book.ISBNs.ebk" type="text" class="ISBNs" rv-on-click="selectAll" rv-readonly="book.isEditing < button | opposite"></label>
        </td>
        <td><input type="date" rv-value="book.pubdate" rv-readonly="book.isEditing < button | opposite"></td>
        <td><textarea maxlength="350" cols="30" rows="3" rv-value="book.shortdesc" rv-on-click="selectAll" rv-readonly="book.isEditing < button | opposite"></textarea></td>
        <td><button rv-on-click="editOrSubmit" rv-html="book.button"></button></td>
      </tr>
    </table>
  </div>

  <div class="author-overlay" rv-on-click="closeModal">
    <div class="author-modal">
      <input class="author-header" rv-on-click="selectAll" rv-value="currentAuthor#name" rv-readonly="isEditingAuthor | opposite">
      <textarea rows="20" rv-value="currentAuthor#biog" rv-readonly="isEditingAuthor | opposite"></textarea>
      <button class="author-edit" rv-on-click="editAuthor" rv-html="authorButton"></button>
      <button rv-on-click="closeModal">&#215;</button>
    </div>
  </div>

  <script src="js/init-compiled.js"></script>
</body>

</html>
